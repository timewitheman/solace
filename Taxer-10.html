<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Taxer by Citizenolu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        brand: {
                            yellow: '#FFD700',
                            dark: '#0F172A',
                            beige: '#F8FAFC',
                            green: '#10B981',
                            red: '#EF4444',
                            purple: '#8B5CF6'
                        }
                    },
                    animation: {
                        ticker: 'ticker 25s linear infinite',
                    },
                    keyframes: {
                        ticker: {
                            '0%': { transform: 'translateX(100%)' },
                            '100%': { transform: 'translateX(-100%)' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Base Reset */
        body { 
            background-color: #F8FAFC; 
            color: #0F172A; 
            -webkit-tap-highlight-color: transparent;
            height: 100vh;
            height: 100dvh; 
            overflow: hidden; 
            display: flex;
            flex-direction: column;
        }

        /* Landscape Specific Adjustments */
        @media (orientation: landscape) {
            body { max-width: 42rem !important; margin: 0 auto; border-left: 1px solid #e5e7eb; border-right: 1px solid #e5e7eb; }
            #main-container { display: flex; flex-direction: column; align-items: center; }
            .section-container { width: 100%; max-width: 100%; }
        }

        /* Utility */
        .hidden-section { display: none !important; }
        .active-section { display: block !important; animation: fadeIn 0.3s ease-out; width: 100%; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Nav Pill Active State */
        .nav-pill.active { background-color: #FFD700; color: #0F172A; font-weight: 700; }
        .nav-pill { transition: all 0.2s; }
    </style>
</head>
<body class="w-full max-w-md mx-auto bg-brand-beige shadow-2xl border-x border-gray-200 relative">

    <header class="bg-brand-dark p-4 pt-6 pb-2 rounded-b-[1.5rem] shadow-md z-30 flex-none relative w-full">
        <div class="flex items-center justify-between mb-4">
            <div class="flex items-center gap-3">
                <div class="bg-brand-yellow p-1.5 rounded-lg shadow-lg shadow-brand-yellow/20">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0F172A" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 11L12 14L22 4"></path>
                        <path d="M21 12C21 16.97 16.97 21 12 21C7.03 21 3 16.97 3 12C3 7.03 7.03 3 12 3"></path>
                    </svg>
                </div>
                <div>
                    <h1 class="font-extrabold text-xl leading-none text-white tracking-tight">Taxer<span class="text-brand-yellow">.</span></h1>
                    <p class="text-[10px] font-medium text-brand-yellow opacity-90 tracking-wider">by Citizenolu</p>
                </div>
            </div>
            <button onclick="resetApp()" class="bg-white/10 text-white p-2 rounded-full active:bg-white/20 transition-colors">
                <i class="ph-bold ph-arrow-counter-clockwise text-lg"></i>
            </button>
        </div>

        <nav class="flex flex-wrap justify-center gap-2 w-full">
            <button onclick="navigateTo('view-home')" id="nav-home" class="nav-pill active bg-white/10 text-white text-[10px] px-3 py-1.5 rounded-full flex items-center gap-1.5 hover:bg-white/20">
                <i class="ph-bold ph-house"></i> Home
            </button>
            <button onclick="navigateTo('view-vat-step1')" id="nav-vat" class="nav-pill bg-white/10 text-white text-[10px] px-3 py-1.5 rounded-full flex items-center gap-1.5 hover:bg-white/20">
                <i class="ph-bold ph-shield-check"></i> VAT
            </button>
            <button onclick="navigateTo('view-bill-input')" id="nav-bill" class="nav-pill bg-white/10 text-white text-[10px] px-3 py-1.5 rounded-full flex items-center gap-1.5 hover:bg-white/20">
                <i class="ph-bold ph-receipt"></i> Bill
            </button>
            <button onclick="navigateTo('view-paye')" id="nav-paye" class="nav-pill bg-white/10 text-white text-[10px] px-3 py-1.5 rounded-full flex items-center gap-1.5 hover:bg-white/20">
                <i class="ph-bold ph-calculator"></i> PAYE
            </button>
            <button onclick="navigateTo('view-business')" id="nav-biz" class="nav-pill bg-white/10 text-white text-[10px] px-3 py-1.5 rounded-full flex items-center gap-1.5 hover:bg-white/20">
                <i class="ph-bold ph-briefcase"></i> Biz
            </button>
        </nav>
    </header>

    <div class="bg-brand-yellow text-brand-dark overflow-hidden py-1.5 shadow-sm z-20 relative flex-none w-full border-b border-brand-yellow/50">
        <div class="whitespace-nowrap animate-ticker inline-block w-full text-[10pt] font-bold leading-none">
            <span class="mx-4">üèõÔ∏è FIRS is now NIRS (Nigeria Revenue Service)</span>
            <span class="mx-4">‚Ä¢</span>
            <span class="mx-4">üìú 4 New Bills: Nigeria Tax Bill, Tax Admin Bill, NRS Bill, Joint Revenue Board Bill</span>
            <span class="mx-4">‚Ä¢</span>
            <span class="mx-4">üìâ VAT: 0% on Food & Meds</span>
            <span class="mx-4">‚Ä¢</span>
            <span class="mx-4">üí∞ PAYE: First ‚Ç¶800k Tax-Free</span>
            <span class="mx-4">‚Ä¢</span>
            <span class="mx-4">üè¢ Small Biz (Turnover < ‚Ç¶100M) CIT Exempt</span>
        </div>
    </div>

    <main class="flex-1 overflow-y-auto p-4 pb-8 scroll-smooth w-full" id="main-container">

        <div id="view-home" class="active-section section-container space-y-5">
            
            <div class="w-full">
                <div class="flex items-center justify-between px-1 mb-2">
                    <h2 class="text-[10px] font-bold text-gray-400 uppercase tracking-wider">Key Reforms (Auto-Sliding)</h2>
                </div>
                
                <div class="flex justify-center w-full">
                    <div id="reformsDeck" class="flex overflow-x-auto snap-x snap-mandatory gap-4 pb-2 -mx-4 px-4 no-scrollbar scroll-smooth w-full">
                        
                        <div class="snap-center flex-none w-60 h-40 bg-brand-dark text-white p-4 rounded-2xl relative overflow-hidden shadow-lg flex flex-col justify-between group mx-auto">
                            <div class="absolute -right-4 -top-4 bg-brand-yellow/20 w-20 h-20 rounded-full blur-xl"></div>
                            <div>
                                <div class="flex items-center gap-1.5 mb-1 text-brand-yellow">
                                    <i class="ph-fill ph-shield-check text-lg"></i>
                                    <span class="text-[10px] font-bold uppercase tracking-wider">VAT Reform</span>
                                </div>
                                <h3 class="text-lg font-extrabold leading-tight">Threshold is <br>now ‚Ç¶100M</h3>
                                <p class="text-[10px] text-gray-400 mt-1 leading-snug">Only businesses with >‚Ç¶100M turnover can charge VAT.</p>
                            </div>
                            <button onclick="navigateTo('view-vat-step1')" class="bg-white/10 hover:bg-white/20 text-white text-[10px] font-bold py-2 px-3 rounded-lg w-fit flex items-center gap-1 transition-colors">
                                Check Seller <i class="ph-bold ph-arrow-right"></i>
                            </button>
                        </div>

                        <div class="snap-center flex-none w-60 h-40 bg-brand-purple text-white p-4 rounded-2xl relative overflow-hidden shadow-lg flex flex-col justify-between group mx-auto">
                                <div class="absolute -right-4 -top-4 bg-white/20 w-20 h-20 rounded-full blur-xl"></div>
                            <div>
                                <div class="flex items-center gap-1.5 mb-1 text-white/80">
                                    <i class="ph-fill ph-money text-lg"></i>
                                    <span class="text-[10px] font-bold uppercase tracking-wider">Income Tax</span>
                                </div>
                                <h3 class="text-lg font-extrabold leading-tight">‚Ç¶800k Income <br>is Tax Free</h3>
                                <p class="text-[10px] text-purple-100 mt-1 leading-snug">The first ‚Ç¶800,000 earned is taxed at 0% rate.</p>
                            </div>
                            <button onclick="navigateTo('view-paye')" class="bg-white/10 hover:bg-white/20 text-white text-[10px] font-bold py-2 px-3 rounded-lg w-fit flex items-center gap-1 transition-colors">
                                Calc PAYE <i class="ph-bold ph-arrow-right"></i>
                            </button>
                        </div>

                        <div class="snap-center flex-none w-60 h-40 bg-brand-green text-white p-4 rounded-2xl relative overflow-hidden shadow-lg flex flex-col justify-between group mx-auto">
                                <div class="absolute -right-4 -top-4 bg-white/20 w-20 h-20 rounded-full blur-xl"></div>
                            <div>
                                <div class="flex items-center gap-1.5 mb-1 text-white/80">
                                    <i class="ph-fill ph-storefront text-lg"></i>
                                    <span class="text-[10px] font-bold uppercase tracking-wider">Small Business</span>
                                </div>
                                <h3 class="text-lg font-extrabold leading-tight">0% CIT for <br>Small Biz</h3>
                                <p class="text-[10px] text-green-100 mt-1 leading-snug">Turnover below ‚Ç¶100M? You are exempt from CIT.</p>
                            </div>
                            <button onclick="navigateTo('view-business')" class="bg-white/10 hover:bg-white/20 text-white text-[10px] font-bold py-2 px-3 rounded-lg w-fit flex items-center gap-1 transition-colors">
                                Check Status <i class="ph-bold ph-arrow-right"></i>
                            </button>
                        </div>
                        
                        <div class="snap-center flex-none w-1"></div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-3 w-full">
                <button onclick="navigateTo('view-paye')" class="bg-white border border-gray-100 p-4 rounded-2xl shadow-sm text-left active:scale-95 transition-transform hover:shadow-md">
                    <div class="bg-purple-50 text-purple-600 w-8 h-8 rounded-lg flex items-center justify-center mb-2">
                        <i class="ph-fill ph-calculator text-lg"></i>
                    </div>
                    <h3 class="font-bold text-gray-800 text-xs">PAYE Calc</h3>
                    <p class="text-[9px] text-gray-500 mt-0.5">2025 Bands</p>
                </button>

                <button onclick="navigateTo('view-business')" class="bg-white border border-gray-100 p-4 rounded-2xl shadow-sm text-left active:scale-95 transition-transform hover:shadow-md">
                    <div class="bg-green-50 text-green-600 w-8 h-8 rounded-lg flex items-center justify-center mb-2">
                        <i class="ph-fill ph-briefcase text-lg"></i>
                    </div>
                    <h3 class="font-bold text-gray-800 text-xs">Biz Tax</h3>
                    <p class="text-[9px] text-gray-500 mt-0.5">CIT Check</p>
                </button>
            </div>

            <button onclick="navigateTo('view-bill-input')" class="w-full bg-white border border-gray-200 p-4 rounded-2xl shadow-sm text-left flex items-center justify-between active:bg-gray-50 hover:shadow-md transition-all">
                <div class="flex items-center gap-3">
                    <div class="bg-brand-yellow/20 text-brand-dark w-10 h-10 rounded-xl flex items-center justify-center">
                        <i class="ph-fill ph-receipt text-xl"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-gray-800 text-sm">Analyze Tax Bill</h3>
                        <p class="text-[10px] text-gray-500 font-medium">Visualize key facts</p>
                    </div>
                </div>
                <div class="bg-gray-100 p-1.5 rounded-full text-gray-400">
                    <i class="ph-bold ph-caret-right"></i>
                </div>
            </button>
            
             <div class="text-center pt-2">
                <a href="https://africacheck.org/sites/default/files/media/documents/2025-07/FINAL-COPY-NIGERIA-TAX-ADMINISTRATION-ACT-2025.pdf" target="_blank" class="text-[10px] text-brand-purple font-bold hover:underline opacity-80 flex flex-col items-center gap-1">
                    <i class="ph-bold ph-file-pdf text-lg"></i>
                    Read the 2025 Tax Act (PDF)
                </a>
            </div>
        </div>

        <div id="view-bill-input" class="hidden-section section-container space-y-4">
            <h2 class="text-xl font-extrabold text-brand-dark">Input Bill Data</h2>
            <div class="bg-white p-5 rounded-3xl shadow-sm border border-gray-100 space-y-4">
                <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase mb-1">A. Gross Income (‚Ç¶)</label>
                    <input type="number" id="bill-gross" class="w-full p-3 bg-gray-50 border rounded-xl font-bold text-brand-dark outline-none focus:border-brand-yellow transition-colors" placeholder="e.g. 15000000">
                </div>
                <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase mb-1">B. Reliefs (‚Ç¶)</label>
                    <input type="number" id="bill-reliefs" class="w-full p-3 bg-gray-50 border rounded-xl font-bold text-brand-dark outline-none focus:border-brand-yellow transition-colors" placeholder="e.g. 4000000">
                </div>
                 <div>
                    <label class="block text-xs font-bold text-gray-500 uppercase mb-1">C. Tax Payable (‚Ç¶)</label>
                    <input type="number" id="bill-tax" class="w-full p-3 bg-brand-yellow/10 border border-brand-yellow/50 rounded-xl font-bold text-brand-dark outline-none focus:border-brand-yellow transition-colors" placeholder="e.g. 1500000">
                </div>
                <button onclick="analyzeBill()" class="w-full bg-brand-dark text-white font-bold py-3.5 rounded-2xl shadow-lg mt-2 active:scale-95 transition-transform hover:shadow-xl">Analyze Now</button>
            </div>
        </div>

        <div id="view-bill-facts" class="hidden-section section-container space-y-4">
            <div class="bg-brand-dark text-white p-5 rounded-3xl shadow-lg text-center relative overflow-hidden">
                <div class="absolute top-0 right-0 opacity-10"><i class="ph-fill ph-percent text-7xl"></i></div>
                <p class="text-gray-400 text-[10px] uppercase font-bold tracking-widest mb-1 relative z-10">Effective Tax Rate</p>
                <h3 class="text-4xl font-extrabold text-brand-yellow relative z-10" id="fact-rate">0%</h3>
                <p class="text-[10px] mt-2 text-gray-300 relative z-10" id="fact-rate-summary">Based on your input.</p>
            </div>

            <div class="bg-white p-5 rounded-3xl shadow-sm border border-gray-100">
                <h4 class="text-xs font-bold text-brand-dark mb-3 flex items-center gap-2"><i class="ph-fill ph-chart-pie-slice text-brand-purple"></i> Income Distribution</h4>
                <div class="flex justify-between text-[10px] font-bold mb-1 uppercase tracking-wider">
                    <span class="text-brand-red">Tax Paid</span>
                    <span class="text-brand-green">You Keep</span>
                </div>
                <div class="h-5 bg-brand-green/20 rounded-full overflow-hidden flex w-full relative">
                    <div id="slider-tax-fill" class="h-full bg-brand-red transition-all duration-700 ease-out" style="width: 0%"></div>
                </div>
                <div class="mt-2 text-center">
                    <span class="text-xs text-gray-600 font-medium">You keep <strong class="text-brand-green" id="fact-kept-percent">0%</strong> of your income.</span>
                </div>
            </div>

             <div class="bg-white p-5 rounded-3xl shadow-sm border border-gray-100">
                 <h4 class="text-xs font-bold text-brand-dark mb-3 flex items-center gap-2"><i class="ph-fill ph-shield text-brand-yellow"></i> Relief Shield</h4>
                <div class="h-3 bg-gray-100 rounded-full overflow-hidden w-full relative">
                    <div id="slider-relief-fill" class="h-full bg-brand-yellow transition-all duration-700 ease-out" style="width: 0%"></div>
                </div>
                <div class="flex justify-between mt-2 text-[10px] font-bold text-gray-500">
                    <span id="fact-relief-percent" class="text-brand-dark">0% Shielded</span>
                     <span id="fact-relief-amount">‚Ç¶0</span>
                </div>
            </div>
        </div>

        <div id="view-vat-step1" class="hidden-section section-container space-y-4">
            <h2 class="text-xl font-extrabold text-brand-dark">Who is selling?</h2>
            
            <button onclick="setVatData('sellerType', 'business'); navigateTo('view-vat-step2')" class="w-full bg-white p-4 rounded-3xl shadow-sm border border-gray-100 flex items-center gap-4 text-left active:bg-gray-50 hover:border-brand-yellow/50 transition-all">
                <div class="bg-brand-dark/5 p-3 rounded-2xl text-brand-dark"><i class="ph-bold ph-buildings text-xl"></i></div>
                <div>
                    <div class="font-bold text-brand-dark text-base">Registered Business</div>
                    <div class="text-[10px] text-gray-400 font-medium">Shop, Company, Service</div>
                </div>
            </button>
            
            <button onclick="setVatData('sellerType', 'individual'); showVatResult('individual')" class="w-full bg-white p-4 rounded-3xl shadow-sm border border-gray-100 flex items-center gap-4 text-left active:bg-gray-50 hover:border-brand-green/50 transition-all">
                <div class="bg-brand-dark/5 p-3 rounded-2xl text-brand-dark"><i class="ph-bold ph-user text-xl"></i></div>
                <div>
                    <div class="font-bold text-brand-dark text-base">Individual / Freelancer</div>
                    <div class="text-[10px] text-gray-400 font-medium">Private seller, artisan</div>
                </div>
            </button>
        </div>

        <div id="view-vat-step2" class="hidden-section section-container space-y-4">
             <button onclick="navigateTo('view-vat-step1')" class="text-xs font-bold text-gray-500 flex items-center gap-1"><i class="ph-bold ph-arrow-left"></i> Back</button>
            <h2 class="text-xl font-extrabold text-brand-dark">Turnover > ‚Ç¶100M?</h2>
            
            <button onclick="setVatData('turnover', 'high'); navigateTo('view-vat-step3')" class="w-full bg-white p-4 rounded-3xl shadow-sm border-2 border-brand-yellow/50 flex items-center gap-4 text-left active:bg-yellow-50">
                <div class="bg-brand-yellow text-brand-dark p-3 rounded-2xl"><i class="ph-bold ph-check text-xl"></i></div>
                <div class="font-bold text-brand-dark text-base">Yes, Above ‚Ç¶100M</div>
            </button>
            
            <button onclick="setVatData('turnover', 'low'); showVatResult('turnover_low')" class="w-full bg-white p-4 rounded-3xl shadow-sm border border-gray-100 flex items-center gap-4 text-left active:bg-gray-50 hover:border-brand-green/50">
                <div class="bg-gray-100 p-3 rounded-2xl"><i class="ph-bold ph-x text-xl"></i></div>
                <div class="font-bold text-brand-dark text-base">No, Below ‚Ç¶100M</div>
            </button>
            
             <button onclick="setVatData('turnover', 'unknown'); navigateTo('view-vat-step3')" class="w-full bg-white p-4 rounded-3xl shadow-sm border border-gray-100 flex items-center gap-4 text-left active:bg-gray-50 hover:border-brand-purple/50">
                <div class="bg-gray-100 p-3 rounded-2xl"><i class="ph-bold ph-question text-xl"></i></div>
                <div class="font-bold text-brand-dark text-base">I don't know</div>
            </button>
        </div>

        <div id="view-vat-step3" class="hidden-section section-container space-y-4">
             <button onclick="navigateTo('view-vat-step2')" class="text-xs font-bold text-gray-500 flex items-center gap-1"><i class="ph-bold ph-arrow-left"></i> Back</button>
            <h2 class="text-xl font-extrabold text-brand-dark">What is the item?</h2>
            
            <div class="relative">
                <i class="ph-bold ph-magnifying-glass absolute left-4 top-3.5 text-gray-400"></i>
                <input type="text" id="itemSearchInput" onkeyup="filterItems()" placeholder="Search (e.g. Rice, Rent)..." class="w-full p-3 pl-10 rounded-2xl border-none shadow-sm outline-none ring-1 ring-gray-200 focus:ring-2 focus:ring-brand-yellow bg-white font-medium">
                <div id="itemList" class="absolute top-14 left-0 w-full bg-white rounded-2xl shadow-xl hidden max-h-48 overflow-y-auto item-list z-10 border border-gray-100"></div>
            </div>

            <div class="flex flex-wrap gap-2">
                <button onclick="selectItem('Rice', true)" class="bg-white border border-gray-200 px-3 py-2 rounded-xl text-[10px] font-bold hover:bg-gray-50">Rice</button>
                <button onclick="selectItem('Meds', true)" class="bg-white border border-gray-200 px-3 py-2 rounded-xl text-[10px] font-bold hover:bg-gray-50">Meds</button>
                <button onclick="selectItem('Books', true)" class="bg-white border border-gray-200 px-3 py-2 rounded-xl text-[10px] font-bold hover:bg-gray-50">Books</button>
                <button onclick="selectItem('Veg', true)" class="bg-white border border-gray-200 px-3 py-2 rounded-xl text-[10px] font-bold hover:bg-gray-50">Veg</button>
            </div>

            <button onclick="selectItem('General Goods', false)" class="w-full bg-brand-dark text-white font-bold py-3.5 rounded-2xl mt-4 shadow-lg shadow-brand-dark/20 text-sm">Item not listed (General)</button>
        </div>

        <div id="view-vat-result" class="hidden-section section-container text-center pt-8">
            </div>

        <div id="view-paye" class="hidden-section section-container space-y-4">
            <h2 class="text-xl font-extrabold text-brand-dark">PAYE 2025</h2>
            
            <div class="bg-white p-5 rounded-3xl shadow-sm border border-gray-100 space-y-4">
                <input type="number" id="paye-income" class="w-full p-3 bg-gray-50 border border-transparent rounded-xl font-bold focus:bg-white focus:border-brand-purple outline-none transition-colors" placeholder="Annual Income (‚Ç¶)">
                <input type="number" id="paye-rent" class="w-full p-3 bg-gray-50 border border-transparent rounded-xl focus:bg-white focus:border-brand-purple outline-none transition-colors" placeholder="Annual Rent (‚Ç¶)">
                <div class="flex items-center gap-3 text-sm font-medium text-gray-700 bg-gray-50 p-3 rounded-xl">
                    <input type="checkbox" id="paye-pension" checked class="w-5 h-5 accent-brand-purple rounded">
                    <span>Deduct Pension (8%)</span>
                </div>
                <button onclick="calculatePAYE()" class="w-full bg-brand-dark text-white font-bold py-3.5 rounded-2xl shadow-lg mt-2 active:scale-95 transition-transform">Calculate</button>
            </div>

            <div id="paye-result" class="hidden bg-brand-dark text-white p-5 rounded-3xl relative overflow-hidden shadow-xl">
                <div class="absolute -right-6 -bottom-6 text-white/5"><i class="ph-fill ph-coins text-8xl"></i></div>
                <div class="flex justify-between mb-3 relative z-10">
                    <span class="text-gray-400 text-[10px] font-bold uppercase tracking-wider">Monthly Tax</span>
                    <span class="font-bold text-brand-yellow text-xl" id="res-monthly">‚Ç¶0</span>
                </div>
                <div class="flex justify-between border-t border-white/10 pt-3 relative z-10">
                    <span class="text-gray-400 text-[10px] font-bold uppercase tracking-wider">Effective Rate</span>
                    <span class="font-bold text-brand-green text-base" id="res-rate">0%</span>
                </div>
                 <div class="mt-3 text-[9px] text-gray-500 relative z-10">
                    Calculated using 2025 progressive bands. First ‚Ç¶800k is tax free.
                </div>
            </div>
        </div>
        
         <div id="view-business" class="hidden-section section-container space-y-4">
            <h2 class="text-xl font-extrabold text-brand-dark">Business Check</h2>
            <div class="bg-white p-5 rounded-3xl shadow-sm border border-gray-100">
                <label class="block text-xs font-bold text-gray-400 uppercase mb-2">Annual Turnover</label>
                <input type="number" id="biz-turnover" class="w-full p-3 bg-gray-50 border border-transparent rounded-xl font-bold mb-4 focus:bg-white focus:border-brand-green outline-none transition-colors" placeholder="e.g. 50,000,000">
                <button onclick="checkBusinessTax()" class="w-full bg-brand-green text-white font-bold py-3.5 rounded-2xl shadow-lg shadow-brand-green/20 active:scale-95 transition-transform">Check Status</button>
            </div>
            <div id="biz-result" class="hidden p-5 rounded-3xl border-2 transition-all"></div>
        </div>

    </main>

    <script>
        // === AUTO SLIDE LOGIC ===
        const deck = document.getElementById('reformsDeck');
        let scrollAmount = 0;
        const cardWidth = 256; 
        
        setInterval(() => {
            if (scrollAmount >= deck.scrollWidth - deck.clientWidth) {
                scrollAmount = 0;
                deck.scrollTo({ left: 0, behavior: 'smooth' });
            } else {
                scrollAmount += cardWidth;
                deck.scrollTo({ left: scrollAmount, behavior: 'smooth' });
            }
        }, 2000);

        // === DATA & STATE ===
        const vatData = { sellerType: null, turnover: null, item: null };
        const exemptItems = ["Rice", "Beans", "Bread", "Meds", "Books", "Baby Food", "Veg", "Fruits", "Rent", "Transport"];

        // === NAVIGATION ===
        function navigateTo(id) {
            // Update Active Pill
            document.querySelectorAll('.nav-pill').forEach(btn => {
                btn.classList.remove('active', 'bg-brand-yellow', 'text-brand-dark', 'font-bold');
                btn.classList.add('bg-white/10', 'text-white');
            });
            
            // Map views to buttons
            const map = {
                'view-home': 'nav-home',
                'view-vat-step1': 'nav-vat',
                'view-vat-step2': 'nav-vat',
                'view-vat-step3': 'nav-vat',
                'view-vat-result': 'nav-vat',
                'view-bill-input': 'nav-bill',
                'view-bill-facts': 'nav-bill',
                'view-paye': 'nav-paye',
                'view-business': 'nav-biz'
            };
            
            const btnId = map[id];
            if(btnId) {
                const btn = document.getElementById(btnId);
                btn.classList.add('active', 'bg-brand-yellow', 'text-brand-dark', 'font-bold');
                btn.classList.remove('bg-white/10', 'text-white');
            }

            // View Transition
            document.querySelectorAll('.active-section').forEach(e => {
                e.classList.remove('active-section');
                e.classList.add('hidden-section');
            });
            const el = document.getElementById(id);
            el.classList.remove('hidden-section');
            el.classList.add('active-section');
            document.getElementById('main-container').scrollTop = 0;
        }

        function resetApp() {
             ['paye-income', 'paye-rent', 'biz-turnover', 'bill-gross', 'bill-tax', 'bill-reliefs'].forEach(id => document.getElementById(id).value = '');
             ['paye-result', 'biz-result'].forEach(id => document.getElementById(id).classList.add('hidden'));
             navigateTo('view-home');
        }

        // === VAT TOOL ===
        function setVatData(k, v) { vatData[k] = v; }
        
        function filterItems() {
            const val = document.getElementById('itemSearchInput').value.toLowerCase();
            const list = document.getElementById('itemList');
            list.innerHTML = '';
            if(val) {
                list.classList.remove('hidden');
                exemptItems.filter(i => i.toLowerCase().includes(val)).forEach(i => {
                    const btn = document.createElement('div');
                    btn.className = 'p-3 border-b border-gray-50 font-bold text-xs text-gray-700 active:bg-gray-50';
                    btn.innerHTML = `<i class="ph-fill ph-plant text-brand-green mr-2"></i> ${i}`;
                    btn.onclick = () => { selectItem(i, true); list.classList.add('hidden'); document.getElementById('itemSearchInput').value = i; };
                    list.appendChild(btn);
                });
            } else { list.classList.add('hidden'); }
        }

        function selectItem(name, isExempt) {
            vatData.item = name;
            let resultKey = 'charge_vat';
            if (vatData.sellerType === 'individual') resultKey = 'individual';
            else if (vatData.turnover === 'low') resultKey = 'turnover_low';
            else if (isExempt) resultKey = 'exempt_item';
            
            showVatResult(resultKey);
        }

        function showVatResult(type) {
            const c = document.getElementById('view-vat-result');
            let html = '';
            if(type === 'individual') html = `<div class="bg-brand-green text-white p-6 rounded-b-[2rem] -mt-8 pt-10 shadow-lg"><i class="ph-fill ph-shield-check text-5xl mb-2"></i><h2 class="text-2xl font-extrabold">NO VAT</h2><p class="opacity-90 mt-1 font-medium text-sm">Individuals cannot charge VAT.</p></div><div class="p-4 mt-2 text-gray-600 text-xs">Only NIRS registered businesses are authorized to collect VAT.</div>`;
            else if(type === 'turnover_low') html = `<div class="bg-brand-green text-white p-6 rounded-b-[2rem] -mt-8 pt-10 shadow-lg"><i class="ph-fill ph-storefront text-5xl mb-2"></i><h2 class="text-2xl font-extrabold">NO VAT</h2><p class="opacity-90 mt-1 font-medium text-sm">Small Biz (< ‚Ç¶100M) is Exempt</p></div><div class="p-4 mt-2 text-gray-600 text-xs">Under the 2025 Act, small businesses are exempt from charging VAT.</div>`;
            else if(type === 'exempt_item') html = `<div class="bg-brand-green text-white p-6 rounded-b-[2rem] -mt-8 pt-10 shadow-lg"><i class="ph-fill ph-plant text-5xl mb-2"></i><h2 class="text-2xl font-extrabold">0% VAT</h2><p class="opacity-90 mt-1 font-medium text-sm">${vatData.item} is Zero-Rated</p></div><div class="p-4 mt-2 text-gray-600 text-xs">Basic items are tax-free regardless of who sells them.</div>`;
            else html = `<div class="bg-brand-red text-white p-6 rounded-b-[2rem] -mt-8 pt-10 shadow-lg"><i class="ph-fill ph-warning-circle text-5xl mb-2"></i><h2 class="text-2xl font-extrabold">VAT APPLIES</h2><p class="opacity-90 mt-1 font-medium text-sm">Standard 7.5% Rate</p></div><div class="p-4 mt-2 text-gray-600 text-xs">Large business selling non-exempt goods must charge VAT.</div>`;
            
            c.innerHTML = html + `<button onclick="resetApp()" class="bg-gray-200 text-gray-700 w-full py-3 rounded-2xl font-bold mx-6 w-[calc(100%-3rem)] text-sm">Start Over</button>`;
            navigateTo('view-vat-result');
        }

        // === PAYE TOOL ===
        function calculatePAYE() {
            const inc = parseFloat(document.getElementById('paye-income').value);
            if(!inc) return;
            let taxable = Math.max(0, inc - 800000); 
            let tax = 0;
            if(taxable > 0) tax += Math.min(taxable, 2200000) * 0.15;
            if(taxable > 2200000) tax += (taxable - 2200000) * 0.18; 

            document.getElementById('res-monthly').innerText = '‚Ç¶' + (tax/12).toLocaleString(undefined, {maximumFractionDigits:0});
            document.getElementById('res-rate').innerText = ((tax/inc)*100).toFixed(1) + '%';
            document.getElementById('paye-result').classList.remove('hidden');
        }

        // === BILL ANALYZER ===
        function analyzeBill() {
             const gross = parseFloat(document.getElementById('bill-gross').value);
             const tax = parseFloat(document.getElementById('bill-tax').value);
             const relief = parseFloat(document.getElementById('bill-reliefs').value) || 0;

             if(!gross || !tax) return;
             
             const rate = (tax/gross)*100;
             const kept = 100 - rate;
             const reliefPerc = (relief/gross)*100;

             document.getElementById('fact-rate').innerText = rate.toFixed(1) + '%';
             
             setTimeout(() => {
                 document.getElementById('slider-tax-fill').style.width = Math.min(rate, 100) + '%';
                 document.getElementById('slider-relief-fill').style.width = Math.min(reliefPerc, 100) + '%';
             }, 300);

             document.getElementById('fact-kept-percent').innerText = kept.toFixed(1) + '%';
             document.getElementById('fact-relief-percent').innerText = reliefPerc.toFixed(1) + '% Shielded';
             document.getElementById('fact-relief-amount').innerText = '‚Ç¶' + relief.toLocaleString();
             
             navigateTo('view-bill-facts');
        }

        // === BIZ TOOL ===
        function checkBusinessTax() {
            const t = parseFloat(document.getElementById('biz-turnover').value);
            const r = document.getElementById('biz-result');
            if(!t) return;
            r.classList.remove('hidden', 'bg-purple-50', 'border-brand-purple', 'bg-green-50', 'border-brand-green');
            
            if(t > 100000000) {
                r.innerHTML = `<div class="flex items-center gap-3 mb-2"><div class="bg-brand-purple text-white p-2 rounded-lg"><i class="ph-bold ph-buildings"></i></div><h3 class="font-extrabold text-brand-purple text-lg">Large Business</h3></div><p class="text-xs font-medium text-gray-600">Pay 30% CIT + Charge VAT</p>`;
                r.classList.add('bg-purple-50', 'border-brand-purple');
            } else {
                r.innerHTML = `<div class="flex items-center gap-3 mb-2"><div class="bg-brand-green text-white p-2 rounded-lg"><i class="ph-bold ph-check"></i></div><h3 class="font-extrabold text-brand-green text-lg">Small Business</h3></div><p class="text-xs font-medium text-gray-600">0% CIT (Exempt) & No VAT</p>`;
                r.classList.add('bg-green-50', 'border-brand-green');
            }
        }
    </script>
</body>
</html>
